(load-plugin (@s (value *package-path*) "/lib/prelude/prelude.so"))

(defun cd (X) (native "prelude.cd" X))
(defun pwd () (native "prelude.pwd"))

(define call/load
        Path File -> (let CWD (pwd)
                          _ (cd Path)
                          Res (trap-error (load File) (/. X (error-to-string X)))
                          _ (cd CWD)
                          Res))

(define import
    Pkg -> (call/load (@s (value *package-path*) "/lib/" Pkg) "package.cora"))
