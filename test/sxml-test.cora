(define-library "cora/test/sxml-test"

  (import "cora/lib/sys")
  (import "cora/lib/toc")
  (import "cora/lib/os")
  (import "cora/lib/io")
  (import "cora/lib/string")
  (import "cora/lib/md4c/include")
  (import "cora/lib/sxml")

  (display "!!!!!!!!!!!!")
  (display "\n")

  (let output (popen ["ls" "../go.blog/content/*.md"] 'r)
    data (read-all output)
    (begin
      (def *cases* (filter (lambda (s) (and 
					(> (string-length s) 0)
					(not (string-contain? s "resume"))
					(not (string-contain? s "sql-in-cockroachdb"))))
			   (string-split data "\n")))
      (pclose output)))

  (for-each (lambda (path)
	      (begin
		(display "processing")
		(display path)
		(display "\n")
		(let sx (process-file path)
		  (map sxml->xml sx))))
	    *cases*)

  )
